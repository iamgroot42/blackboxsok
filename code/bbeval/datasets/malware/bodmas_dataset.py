import os
import numpy as np

import bodmas.multiple_data as multiple_data
from bbeval.datasets.base import CustomDatasetWrapper
from bbeval.config import DatasetConfig


class BODMASWrapper(CustomDatasetWrapper):
    def __init__(self, data_config: DatasetConfig):
        """
            self.ds_train and self.ds_test should be set to
            datasets to be used to train and evaluate.
        """
        super().__init__(data_config)
        filename = os.path.join(self.root, 'bodmas.npz')
        data = np.load(filename)
        X = data['X']  # all the feature vectors
        y = data['y']  # labels, 0 as benign, 1 as malicious
        
        # X_train, Y_train, X_test, Y_test = ember.read_vectorized_features(
            # self.root, feature_version=self.feature_version)
        X_train_origin, y_train_origin, \
        X_test_list, y_test_list = multiple_data.load_bluehex_data(task, test_begin_time, test_end_time,
                                                                   families_cnt=2, is_normalize=False,
                                                                   general_data_folder=GENERAL_DATA_FOLDER,
                                                                   setting_data_folder=None,
                                                                   saved_data_path=saved_data_path)